---
import { SITE_TITLE } from "../../config";
---

<header>
  <div class="layout-wrapper flex justify-between pt-12 pb-16">
    <a href="/" class="title">{SITE_TITLE}</a>
    <button id="js-theme-toggler"></button>
  </div>
</header>

<script clien:differ>
  const isDark = localStorage.theme === "dark";
  const pageBody = document.body;
  const themeTogglBtn = document.getElementById("js-theme-toggler");

  const sunSymbol = "&#9789;";
  const moonSymbol = "&#9728;";

  function setLightTheme() {
    pageBody.classList.remove("dark");
    themeTogglBtn.innerHTML = moonSymbol;
  }

  function setDarkTheme() {
    themeTogglBtn.innerHTML = sunSymbol;
    pageBody.classList.add("dark");
  }

  // Set on load
  isDark ? setDarkTheme() : setLightTheme();

  // Listeners
  themeTogglBtn.addEventListener("click", (e) => {
    const isDark = localStorage.theme === "dark";

    if (isDark) {
      setLightTheme();
      localStorage.theme = "light";
    } else {
      setDarkTheme();
      localStorage.theme = "dark";
    }
  });
</script>
